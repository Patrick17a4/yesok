<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f9f9f9; }
        h1 { color: #ff5733; }
        .container { width: 90%; max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        input, select, button { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 5px; }
        button { background-color: #ff5733; color: white; cursor: pointer; }
        button:hover { background-color: #e64a19; }
        canvas { max-width: 100%; }
    </style>
</head>
<body>

<h1>üçé ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï ü•ó</h1>
<div class="container">
    <h2>üìù ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
    <label>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg): <input type="number" id="weight"></label>
    <label>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á (cm): <input type="number" id="height"></label>
    <label>‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ): <input type="number" id="age"></label>
    <label>‡πÄ‡∏û‡∏®: 
        <select id="gender">
            <option value="male">‡∏ä‡∏≤‡∏¢</option>
            <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
        </select>
    </label>
    <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢:
        <select id="activity">
            <option value="1.2">‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</option>
            <option value="1.375">1-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
            <option value="1.55">3-5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
            <option value="1.725">6-7 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
            <option value="1.9">‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</option>
        </select>
    </label>
    <button onclick="calculateNeeds()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
    <p id="result"></p>
</div>

<div class="container">
    <h2>üçΩÔ∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
    <label>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£:
        <select id="food">
            <option value="‡∏Ç‡πâ‡∏≤‡∏ß">‡∏Ç‡πâ‡∏≤‡∏ß</option>
            <option value="‡πÄ‡∏™‡πâ‡∏ô">‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î</option>
            <option value="‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á">‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á</option>
            <option value="‡∏ú‡∏•‡πÑ‡∏°‡πâ">‡∏ú‡∏•‡πÑ‡∏°‡πâ</option>
            <option value="‡∏ô‡∏°">‡∏ô‡∏°‡∏™‡∏î</option>
            <option value="‡∏ú‡∏±‡∏Å">‡∏ú‡∏±‡∏Å‡∏™‡∏î</option>
        </select>
    </label>
    <button onclick="addFood()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
    <ul id="foodList"></ul>
</div>

<div class="container">
    <h2>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</h2>
    <canvas id="caloriesChart"></canvas>
    <canvas id="carbsChart"></canvas>
</div>

<div class="container">
    <h2>üì¢ ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
    <button onclick="summarize()">‡∏™‡∏£‡∏∏‡∏õ</button>
    <p id="summary"></p>
</div>

<script>
const foodData = {
    "‡∏Ç‡πâ‡∏≤‡∏ß": { calories: 80, carbs: 15 },
    "‡πÄ‡∏™‡πâ‡∏ô": { calories: 100, carbs: 15 },
    "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á": { calories: 80, carbs: 15 },
    "‡∏ú‡∏•‡πÑ‡∏°‡πâ": { calories: 60, carbs: 15 },
    "‡∏ô‡∏°": { calories: 120, carbs: 12 },
    "‡∏ú‡∏±‡∏Å": { calories: 30, carbs: 5 }
};

let dailyCalories = 0, dailyCarbs = 0, totalCalories = 0, totalCarbs = 0;
let calorieChart, carbChart;

function calculateNeeds() {
    let weight = parseFloat(document.getElementById("weight").value);
    let height = parseFloat(document.getElementById("height").value);
    let age = parseFloat(document.getElementById("age").value);
    let gender = document.getElementById("gender").value;
    let activity = parseFloat(document.getElementById("activity").value);
    
    if (!weight || !height || !age) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô!");
        return;
    }

    let BMR = (gender === "male") ? (10 * weight) + (6.25 * height) - (5 * age) + 5 :
                                   (10 * weight) + (6.25 * height) - (5 * age) - 161;

    dailyCalories = BMR * activity;
    dailyCarbs = (dailyCalories * 0.5) / 4;

    document.getElementById("result").innerText =üéØ ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö: ${Math.round(dailyCalories)} kcal / ${Math.round(dailyCarbs)} g ‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï`;
    updateCharts();
}

function addFood() {
    let food = document.getElementById("food").value;
    let calories = foodData[food].calories;
    let carbs = foodData[food].carbs;

    totalCalories += calories;
    totalCarbs += carbs;

    document.getElementById("foodList").innerHTML += <li>${food} (${calories} kcal, ${carbs} g ‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï)</li>;
    updateCharts();
}

function updateCharts() {
    if (calorieChart) calorieChart.destroy();
    if (carbChart) carbChart.destroy();

    calorieChart = new Chart(document.getElementById("caloriesChart"), {
        type: 'doughnut',
        data: { labels: ["‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ", "‡πÄ‡∏´‡∏•‡∏∑‡∏≠"], datasets: [{ data: [totalCalories, Math.max(0, dailyCalories - totalCalories)], backgroundColor: ["#FF5733", "#D3D3D3"] }] }
    });
    carbChart = new Chart(document.getElementById("carbsChart"), {
        type: 'doughnut',
        data: { labels: ["‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ", "‡πÄ‡∏´‡∏•‡∏∑‡∏≠"], datasets: [{ data: [totalCarbs, Math.max(0, dailyCarbs - totalCarbs)], backgroundColor: ["#33FF57", "#D3D3D3"] }] }
    });
}

function summarize() {
    let calPercent = (totalCalories / dailyCalories * 100).toFixed(1);
    let carbPercent = (totalCarbs / dailyCarbs * 100).toFixed(1);
    let advice = totalCalories < dailyCalories ? "‡∏Ñ‡∏ß‡∏£‡∏Å‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°!" : "‡∏Ñ‡∏ß‡∏£‡∏•‡∏î‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏≠‡∏≤‡∏´‡∏≤‡∏£!";

    document.getElementById("summary").innerText =üçΩÔ∏è ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ: ${totalCalories} kcal (${calPercent}%) ‡πÅ‡∏•‡∏∞ ${totalCarbs} g ‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï (${carbPercent}%)\nüí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ${advice}`;
}
</script>

</body>
</html>